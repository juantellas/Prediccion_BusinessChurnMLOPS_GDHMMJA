{"version":2,"kind":"Notebook","sha256":"910ec7e61998e7e7f07637cd8e368d49f0c109bfc1e374cbb810a28a5becce91","slug":"eda","location":"/notebooks/1_eda.ipynb","dependencies":[],"frontmatter":{"title":"1. Análisis Exploratorio de los Datos","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"gpu_venv","language":"python"},"authors":[{"nameParsed":{"literal":"Juan Aguirre","given":"Juan","family":"Aguirre"},"name":"Juan Aguirre","id":"contributors-Users\\taran\\OneDrive\\Documents\\uni\\machin\\miniprojects\\RF-XGB\\Prediccion_BusinessChurnMLOPS_GDHMMJA\\docs\\myst-generated-uid-0"},{"nameParsed":{"literal":"Mariangel Mercado","given":"Mariangel","family":"Mercado"},"name":"Mariangel Mercado","id":"contributors-Users\\taran\\OneDrive\\Documents\\uni\\machin\\miniprojects\\RF-XGB\\Prediccion_BusinessChurnMLOPS_GDHMMJA\\docs\\myst-generated-uid-1"},{"nameParsed":{"literal":"Guirlessa de la Hoz","given":"Guirlessa","non_dropping_particle":"de la","family":"Hoz"},"name":"Guirlessa de la Hoz","id":"contributors-Users\\taran\\OneDrive\\Documents\\uni\\machin\\miniprojects\\RF-XGB\\Prediccion_BusinessChurnMLOPS_GDHMMJA\\docs\\myst-generated-uid-2"}],"github":"https://github.com/juantellas","keywords":["Churn","Telecomunicaciones","Machine Learning","Predicción"],"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"1_eda.ipynb","url":"/1_eda-01ad9f713cdaeb20ae8ee4647e939c33.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.1 Carga de librerías, datos y verificación de su estado.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B8MDHw0hWV"}],"key":"xM3I7GVhzL"}],"identifier":"id-1-1-carga-de-librer-as-datos-y-verificaci-n-de-su-estado","label":"1.1 Carga de librerías, datos y verificación de su estado.","html_id":"id-1-1-carga-de-librer-as-datos-y-verificaci-n-de-su-estado","implicit":true,"key":"C9SRdRM6wj"}],"key":"e0FsboH8lO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"En esta sección realizaremos el cargue de los datos a analizar y de las librerías que nos ayudarán a hacer esto posible.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J2SrX1UBUL"}],"key":"Un8UQSG1bv"}],"key":"XjYZQUVOwu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from sklearnex import patch_sklearn\npatch_sklearn()\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport math\nimport time\nimport statsmodels\nimport os\n\nfrom scipy.sparse import hstack, csr_matrix\nfrom scipy.stats import chi2_contingency\nfrom scipy.stats import shapiro\nfrom statsmodels.stats.outliers_influence import variance_inflation_factor\nfrom statsmodels.tools.tools import add_constant\n","key":"exqPjgOpxn"},{"type":"output","id":"31UQcoLmkaFDJwFf-Cn0J","data":[{"name":"stderr","output_type":"stream","text":"Extension for Scikit-learn* enabled (https://github.com/uxlfoundation/scikit-learn-intelex)\n"}],"key":"J17m9To4j1"}],"key":"l4FtbC1sy1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Antes de empezar, procederemos a hacer algunos ajustes que nos ayudarán a la hora de visualizar más adelante. Junto a ello, cargaremos los datos y funciones que ayudarán a desarrollar esta exploración.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qSD9qrY0Su"}],"key":"EF7NKJZjKu"}],"key":"tuLuOik61D"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sns.set(style=\"whitegrid\")\nplt.rcParams[\"figure.figsize\"] = (10, 6)\n\ndf = pd.read_csv(\"WA_Fn-UseC_-Telco-Customer-Churn.csv\")","key":"FxJC1g9SQI"},{"type":"output","id":"xEKl0afYjEeEUNUcg1dAi","data":[],"key":"qF70D76zRR"}],"key":"yRQQoUdYdn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def analizar_dataframe(df, nombre=\"DataFrame\"):\n    from IPython.display import display\n    \n    print(f\"\\n Análisis exploratorio de: {nombre}\")\n    print(\"=\" * 75)\n    \n    print(f\"Filas: {df.shape[0]:,}  |  Columnas: {df.shape[1]}\")\n    print(\"=\" * 75)\n    \n    print(df.dtypes)\n    print(\"=\" * 75)\n    \n    display(df.head())\n    ","key":"wTQ8BuH4Bl"},{"type":"output","id":"1hZrNpVBeJHmvVngLbx-z","data":[],"key":"Yu5Z9QLso2"}],"key":"ZRsm4mHYam"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"analizar_dataframe(df, nombre=\"WA_Fn-UseC_-Telco-Customer-Churn.csv\")","key":"EP4geUYTPO"},{"type":"output","id":"EbNzknOmfryAWCcUwi3DA","data":[{"name":"stdout","output_type":"stream","text":"\n Análisis exploratorio de: WA_Fn-UseC_-Telco-Customer-Churn.csv\n===========================================================================\nFilas: 7,043  |  Columnas: 21\n===========================================================================\ncustomerID           object\ngender               object\nSeniorCitizen         int64\nPartner              object\nDependents           object\ntenure                int64\nPhoneService         object\nMultipleLines        object\nInternetService      object\nOnlineSecurity       object\nOnlineBackup         object\nDeviceProtection     object\nTechSupport          object\nStreamingTV          object\nStreamingMovies      object\nContract             object\nPaperlessBilling     object\nPaymentMethod        object\nMonthlyCharges      float64\nTotalCharges         object\nChurn                object\ndtype: object\n===========================================================================\n"},{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"customerID\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"gender\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"SeniorCitizen\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"Partner\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Dependents\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"tenure\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"PhoneService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MultipleLines\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"InternetService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineSecurity\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineBackup\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"DeviceProtection\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"TechSupport\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingTV\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingMovies\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Contract\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaperlessBilling\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaymentMethod\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MonthlyCharges\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"TotalCharges\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Churn\",\"rawType\":\"object\",\"type\":\"string\"}],\"ref\":\"17900b78-e639-4448-8929-8f4a300be89f\",\"rows\":[[\"0\",\"7590-VHVEG\",\"Female\",\"0\",\"Yes\",\"No\",\"1\",\"No\",\"No phone service\",\"DSL\",\"No\",\"Yes\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Electronic check\",\"29.85\",\"29.85\",\"No\"],[\"1\",\"5575-GNVDE\",\"Male\",\"0\",\"No\",\"No\",\"34\",\"Yes\",\"No\",\"DSL\",\"Yes\",\"No\",\"Yes\",\"No\",\"No\",\"No\",\"One year\",\"No\",\"Mailed check\",\"56.95\",\"1889.5\",\"No\"],[\"2\",\"3668-QPYBK\",\"Male\",\"0\",\"No\",\"No\",\"2\",\"Yes\",\"No\",\"DSL\",\"Yes\",\"Yes\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Mailed check\",\"53.85\",\"108.15\",\"Yes\"],[\"3\",\"7795-CFOCW\",\"Male\",\"0\",\"No\",\"No\",\"45\",\"No\",\"No phone service\",\"DSL\",\"Yes\",\"No\",\"Yes\",\"Yes\",\"No\",\"No\",\"One year\",\"No\",\"Bank transfer (automatic)\",\"42.3\",\"1840.75\",\"No\"],[\"4\",\"9237-HQITU\",\"Female\",\"0\",\"No\",\"No\",\"2\",\"Yes\",\"No\",\"Fiber optic\",\"No\",\"No\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Electronic check\",\"70.7\",\"151.65\",\"Yes\"]],\"shape\":{\"columns\":21,\"rows\":5}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>customerID</th>\n      <th>gender</th>\n      <th>SeniorCitizen</th>\n      <th>Partner</th>\n      <th>Dependents</th>\n      <th>tenure</th>\n      <th>PhoneService</th>\n      <th>MultipleLines</th>\n      <th>InternetService</th>\n      <th>OnlineSecurity</th>\n      <th>...</th>\n      <th>DeviceProtection</th>\n      <th>TechSupport</th>\n      <th>StreamingTV</th>\n      <th>StreamingMovies</th>\n      <th>Contract</th>\n      <th>PaperlessBilling</th>\n      <th>PaymentMethod</th>\n      <th>MonthlyCharges</th>\n      <th>TotalCharges</th>\n      <th>Churn</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>7590-VHVEG</td>\n      <td>Female</td>\n      <td>0</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>1</td>\n      <td>No</td>\n      <td>No phone service</td>\n      <td>DSL</td>\n      <td>No</td>\n      <td>...</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Electronic check</td>\n      <td>29.85</td>\n      <td>29.85</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>5575-GNVDE</td>\n      <td>Male</td>\n      <td>0</td>\n      <td>No</td>\n      <td>No</td>\n      <td>34</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>...</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>One year</td>\n      <td>No</td>\n      <td>Mailed check</td>\n      <td>56.95</td>\n      <td>1889.5</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3668-QPYBK</td>\n      <td>Male</td>\n      <td>0</td>\n      <td>No</td>\n      <td>No</td>\n      <td>2</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>...</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Mailed check</td>\n      <td>53.85</td>\n      <td>108.15</td>\n      <td>Yes</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>7795-CFOCW</td>\n      <td>Male</td>\n      <td>0</td>\n      <td>No</td>\n      <td>No</td>\n      <td>45</td>\n      <td>No</td>\n      <td>No phone service</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>...</td>\n      <td>Yes</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>One year</td>\n      <td>No</td>\n      <td>Bank transfer (automatic)</td>\n      <td>42.30</td>\n      <td>1840.75</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>9237-HQITU</td>\n      <td>Female</td>\n      <td>0</td>\n      <td>No</td>\n      <td>No</td>\n      <td>2</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Fiber optic</td>\n      <td>No</td>\n      <td>...</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Electronic check</td>\n      <td>70.70</td>\n      <td>151.65</td>\n      <td>Yes</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 21 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"   customerID  gender  SeniorCitizen Partner Dependents  tenure PhoneService  \\\n0  7590-VHVEG  Female              0     Yes         No       1           No   \n1  5575-GNVDE    Male              0      No         No      34          Yes   \n2  3668-QPYBK    Male              0      No         No       2          Yes   \n3  7795-CFOCW    Male              0      No         No      45           No   \n4  9237-HQITU  Female              0      No         No       2          Yes   \n\n      MultipleLines InternetService OnlineSecurity  ... DeviceProtection  \\\n0  No phone service             DSL             No  ...               No   \n1                No             DSL            Yes  ...              Yes   \n2                No             DSL            Yes  ...               No   \n3  No phone service             DSL            Yes  ...              Yes   \n4                No     Fiber optic             No  ...               No   \n\n  TechSupport StreamingTV StreamingMovies        Contract PaperlessBilling  \\\n0          No          No              No  Month-to-month              Yes   \n1          No          No              No        One year               No   \n2          No          No              No  Month-to-month              Yes   \n3         Yes          No              No        One year               No   \n4          No          No              No  Month-to-month              Yes   \n\n               PaymentMethod MonthlyCharges  TotalCharges Churn  \n0           Electronic check          29.85         29.85    No  \n1               Mailed check          56.95        1889.5    No  \n2               Mailed check          53.85        108.15   Yes  \n3  Bank transfer (automatic)          42.30       1840.75    No  \n4           Electronic check          70.70        151.65   Yes  \n\n[5 rows x 21 columns]","content_type":"text/plain"}}}],"key":"ky2u4HKDGM"}],"key":"zQVaLV1sOz"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Este dataset relacionado con ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p9dkUwPApq"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"churn","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pc8fGhuqHI"}],"key":"VIJ2oIbzVd"},{"type":"text","value":" tiene un total de 7,043 filas o registros, teniendo cada unas 20 columnas o variables, dando aproximadamente 140.000 observaciones, con la mayoría de variables teniendo la característica de objeto o caracteres, y solo teniendo pocas de valor numérico.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"o5K6WRoJ2k"}],"key":"HXGPXOJEZN"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Podemos destacar que la variable ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FlhB6cVuYd"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"MonthlyCharges","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Qo7RqX3SXz"}],"key":"ubd8JzABiO"},{"type":"text","value":", a pesar de tener valores numéricos, está considerada como object. Junto a esto, la variable ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Xd8uEq6Ede"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"SeniorCitizen","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CYdj0BGZAK"}],"key":"URoIL9GDCi"},{"type":"text","value":" está escrita como valores binarios. Por el desarrollo del análisis, vamos a cambiar los valores y el tipo de variable a continuación.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mICYIVxVqt"}],"key":"sG09oaF4l1"}],"key":"CLhH3y6Av5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def convertir_binaria_a_si_no(df, columnas):\n    df_copy = df.copy()\n    for col in columnas:\n        if col in df_copy.columns:\n            df_copy[col] = df_copy[col].map({0: \"No\", 1: \"Yes\"}).astype(\"object\")\n    return df_copy\n\ndf = convertir_binaria_a_si_no(df, [\"SeniorCitizen\"])","key":"ejGH3FNq35"},{"type":"output","id":"f8j9F155GXd3-3CbvzetR","data":[],"key":"Nsr9lo9ksT"}],"key":"YVER8JCJVg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def convertir_columna_a_float(df, columna):\n    df_copy = df.copy()\n    if columna in df_copy.columns:\n        if not pd.api.types.is_numeric_dtype(df_copy[columna]):\n            df_copy[columna] = (\n                df_copy[columna]\n                .astype(str)\n                .str.replace(r\"[^0-9\\.-]\", \"\", regex=True)  \n                .replace(\"\", \"0\")  \n                .astype(float)\n            )\n    return df_copy\n\n\ndf = convertir_columna_a_float(df, \"MonthlyCharges\")\ndf = convertir_columna_a_float(df, \"TotalCharges\")","key":"ZDIhGHgYOD"},{"type":"output","id":"pVf3Xv3GmzMF_l5xpHZ2g","data":[],"key":"ck3PJRYgG7"}],"key":"IrwPMtW8of"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.dtypes.value_counts()","key":"YvS43MRRAC"},{"type":"output","id":"6vgcRRP0XDKt_udFSdYbu","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"object\",\"type\":\"unknown\"},{\"name\":\"count\",\"rawType\":\"int64\",\"type\":\"integer\"}],\"ref\":\"9c50e43e-becc-4d39-ba92-7edd7d0609cc\",\"rows\":[[\"object\",\"18\"],[\"float64\",\"2\"],[\"int64\",\"1\"]],\"shape\":{\"columns\":1,\"rows\":3}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/plain":{"content":"object     18\nfloat64     2\nint64       1\nName: count, dtype: int64","content_type":"text/plain"}}}],"key":"b2ulZ8WhEa"}],"key":"ul81afaXPS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Con estos cambios, podemos corroborar la información si volvemos a ver el resumen de los datos.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"N3BLen3i4v"}],"key":"kBjvNJVpkN"}],"key":"LI6znb8yop"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.info()","key":"gbHFR5FvCC"},{"type":"output","id":"nlvuUJsqZ3g2_20NcOJFC","data":[{"name":"stdout","output_type":"stream","text":"<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 7043 entries, 0 to 7042\nData columns (total 21 columns):\n #   Column            Non-Null Count  Dtype  \n---  ------            --------------  -----  \n 0   customerID        7043 non-null   object \n 1   gender            7043 non-null   object \n 2   SeniorCitizen     7043 non-null   object \n 3   Partner           7043 non-null   object \n 4   Dependents        7043 non-null   object \n 5   tenure            7043 non-null   int64  \n 6   PhoneService      7043 non-null   object \n 7   MultipleLines     7043 non-null   object \n 8   InternetService   7043 non-null   object \n 9   OnlineSecurity    7043 non-null   object \n 10  OnlineBackup      7043 non-null   object \n 11  DeviceProtection  7043 non-null   object \n 12  TechSupport       7043 non-null   object \n 13  StreamingTV       7043 non-null   object \n 14  StreamingMovies   7043 non-null   object \n 15  Contract          7043 non-null   object \n 16  PaperlessBilling  7043 non-null   object \n 17  PaymentMethod     7043 non-null   object \n 18  MonthlyCharges    7043 non-null   float64\n 19  TotalCharges      7043 non-null   float64\n 20  Churn             7043 non-null   object \ndtypes: float64(2), int64(1), object(18)\nmemory usage: 1.1+ MB\n"}],"key":"xwZUdxVAKl"}],"key":"Burl25Jm1o"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"pd.set_option('display.max_columns', None)\ndf.head()","key":"FYRRDnZAO2"},{"type":"output","id":"womk2Fxs3mg0koS3vDJGB","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"customerID\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"gender\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"SeniorCitizen\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Partner\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Dependents\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"tenure\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"PhoneService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MultipleLines\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"InternetService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineSecurity\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineBackup\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"DeviceProtection\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"TechSupport\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingTV\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingMovies\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Contract\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaperlessBilling\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaymentMethod\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MonthlyCharges\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"TotalCharges\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"Churn\",\"rawType\":\"object\",\"type\":\"string\"}],\"ref\":\"5f5ac893-1726-490d-a24d-d20afd64b173\",\"rows\":[[\"0\",\"7590-VHVEG\",\"Female\",\"No\",\"Yes\",\"No\",\"1\",\"No\",\"No phone service\",\"DSL\",\"No\",\"Yes\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Electronic check\",\"29.85\",\"29.85\",\"No\"],[\"1\",\"5575-GNVDE\",\"Male\",\"No\",\"No\",\"No\",\"34\",\"Yes\",\"No\",\"DSL\",\"Yes\",\"No\",\"Yes\",\"No\",\"No\",\"No\",\"One year\",\"No\",\"Mailed check\",\"56.95\",\"1889.5\",\"No\"],[\"2\",\"3668-QPYBK\",\"Male\",\"No\",\"No\",\"No\",\"2\",\"Yes\",\"No\",\"DSL\",\"Yes\",\"Yes\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Mailed check\",\"53.85\",\"108.15\",\"Yes\"],[\"3\",\"7795-CFOCW\",\"Male\",\"No\",\"No\",\"No\",\"45\",\"No\",\"No phone service\",\"DSL\",\"Yes\",\"No\",\"Yes\",\"Yes\",\"No\",\"No\",\"One year\",\"No\",\"Bank transfer (automatic)\",\"42.3\",\"1840.75\",\"No\"],[\"4\",\"9237-HQITU\",\"Female\",\"No\",\"No\",\"No\",\"2\",\"Yes\",\"No\",\"Fiber optic\",\"No\",\"No\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Electronic check\",\"70.7\",\"151.65\",\"Yes\"]],\"shape\":{\"columns\":21,\"rows\":5}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>customerID</th>\n      <th>gender</th>\n      <th>SeniorCitizen</th>\n      <th>Partner</th>\n      <th>Dependents</th>\n      <th>tenure</th>\n      <th>PhoneService</th>\n      <th>MultipleLines</th>\n      <th>InternetService</th>\n      <th>OnlineSecurity</th>\n      <th>OnlineBackup</th>\n      <th>DeviceProtection</th>\n      <th>TechSupport</th>\n      <th>StreamingTV</th>\n      <th>StreamingMovies</th>\n      <th>Contract</th>\n      <th>PaperlessBilling</th>\n      <th>PaymentMethod</th>\n      <th>MonthlyCharges</th>\n      <th>TotalCharges</th>\n      <th>Churn</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>7590-VHVEG</td>\n      <td>Female</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>1</td>\n      <td>No</td>\n      <td>No phone service</td>\n      <td>DSL</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Electronic check</td>\n      <td>29.85</td>\n      <td>29.85</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>5575-GNVDE</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>34</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>One year</td>\n      <td>No</td>\n      <td>Mailed check</td>\n      <td>56.95</td>\n      <td>1889.50</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3668-QPYBK</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>2</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Mailed check</td>\n      <td>53.85</td>\n      <td>108.15</td>\n      <td>Yes</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>7795-CFOCW</td>\n      <td>Male</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>45</td>\n      <td>No</td>\n      <td>No phone service</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>One year</td>\n      <td>No</td>\n      <td>Bank transfer (automatic)</td>\n      <td>42.30</td>\n      <td>1840.75</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>9237-HQITU</td>\n      <td>Female</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>2</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Fiber optic</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Electronic check</td>\n      <td>70.70</td>\n      <td>151.65</td>\n      <td>Yes</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"   customerID  gender SeniorCitizen Partner Dependents  tenure PhoneService  \\\n0  7590-VHVEG  Female            No     Yes         No       1           No   \n1  5575-GNVDE    Male            No      No         No      34          Yes   \n2  3668-QPYBK    Male            No      No         No       2          Yes   \n3  7795-CFOCW    Male            No      No         No      45           No   \n4  9237-HQITU  Female            No      No         No       2          Yes   \n\n      MultipleLines InternetService OnlineSecurity OnlineBackup  \\\n0  No phone service             DSL             No          Yes   \n1                No             DSL            Yes           No   \n2                No             DSL            Yes          Yes   \n3  No phone service             DSL            Yes           No   \n4                No     Fiber optic             No           No   \n\n  DeviceProtection TechSupport StreamingTV StreamingMovies        Contract  \\\n0               No          No          No              No  Month-to-month   \n1              Yes          No          No              No        One year   \n2               No          No          No              No  Month-to-month   \n3              Yes         Yes          No              No        One year   \n4               No          No          No              No  Month-to-month   \n\n  PaperlessBilling              PaymentMethod  MonthlyCharges  TotalCharges  \\\n0              Yes           Electronic check           29.85         29.85   \n1               No               Mailed check           56.95       1889.50   \n2              Yes               Mailed check           53.85        108.15   \n3               No  Bank transfer (automatic)           42.30       1840.75   \n4              Yes           Electronic check           70.70        151.65   \n\n  Churn  \n0    No  \n1    No  \n2   Yes  \n3    No  \n4   Yes  ","content_type":"text/plain"}}}],"key":"NmtrRCUz1u"}],"key":"c5t5mwY6Sh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.2 Verificación de datos faltantes y outliers.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Y48fbbupo9"}],"key":"DSYj0v0R2v"}],"identifier":"id-1-2-verificaci-n-de-datos-faltantes-y-outliers","label":"1.2 Verificación de datos faltantes y outliers.","html_id":"id-1-2-verificaci-n-de-datos-faltantes-y-outliers","implicit":true,"key":"i09FE34Rop"}],"key":"BhZM1gNZn0"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A continuación, usaremos un mapa de calor para observar si existen datos faltantes dentro de nuestro dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eVeqByfkvj"}],"key":"IizzfdIPCj"}],"key":"mlE5TgKIzE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def mostrar_faltantes(df):\n    faltantes = df.isnull().sum()\n    porcentaje = (faltantes / len(df)) * 100\n\n    tabla_faltantes = pd.DataFrame({\n        'Valores faltantes': faltantes,\n        'Porcentaje (%)': porcentaje\n    })\n\n    tabla_faltantes = tabla_faltantes[tabla_faltantes['Valores faltantes'] > 0]\n    tabla_faltantes.sort_values('Porcentaje (%)', ascending=False)\n    return tabla_faltantes","key":"cA12lLXnfv"},{"type":"output","id":"C1T0sKU0ghL_rox3D5p20","data":[],"key":"NpYQFBF8Xp"}],"key":"E2oai7umus"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12, 6))\nsns.heatmap(df.isnull(), cbar=False, yticklabels=False, cmap='Blues')\nplt.title(\"Mapa de calor de valores faltantes\", fontsize=14)\nplt.show()","key":"UWV1KRMkgB"},{"type":"output","id":"448AjdoQP0kfdEAvxZXtr","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"71bcd1a48cf63bea059f6568c8c494ca","path":"/71bcd1a48cf63bea059f6568c8c494ca.png"},"text/plain":{"content":"<Figure size 1200x600 with 1 Axes>","content_type":"text/plain"}}}],"key":"tatPPmVEpf"}],"key":"qukPs4V4PP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Afortunadamente, en este caso, no vemos presencia de datos faltantes; esto lo podemos corroborar viendo los porcentajes de faltantes para cada variable en forma tabular.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v7OnKTKIGO"}],"key":"dXTmwxz4ae"}],"key":"Kf5eFQx2ka"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"mostrar_faltantes(df)","key":"JMTC5WrgcF"},{"type":"output","id":"CBPutAaBKuJF_MnbtYWoN","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Valores faltantes\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"Porcentaje (%)\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"7388aff1-5ccd-46e2-a3da-f607aa92a21b\",\"rows\":[],\"shape\":{\"columns\":2,\"rows\":0}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Valores faltantes</th>\n      <th>Porcentaje (%)</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"Empty DataFrame\nColumns: [Valores faltantes, Porcentaje (%)]\nIndex: []","content_type":"text/plain"}}}],"key":"ImoIwIThtk"}],"key":"T28OiIefJc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Junto a lo anterior, verifiquemos si existen problemas con registros duplicados.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VWPIoKfUby"}],"key":"urHZqD43kJ"}],"key":"jvV1ibbwKL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"duplicados_totales = df.duplicated().sum()\nprint(\"Duplicados totales en el dataset:\", duplicados_totales)\n\ndf[df.duplicated(keep=False)].head()","key":"zukYWsbxhx"},{"type":"output","id":"ce2_wapwt1o2Qry7qfEfW","data":[{"name":"stdout","output_type":"stream","text":"Duplicados totales en el dataset: 0\n"},{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"customerID\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"gender\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"SeniorCitizen\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Partner\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Dependents\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"tenure\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"PhoneService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MultipleLines\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"InternetService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineSecurity\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineBackup\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"DeviceProtection\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"TechSupport\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingTV\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingMovies\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Contract\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaperlessBilling\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaymentMethod\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MonthlyCharges\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"TotalCharges\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"Churn\",\"rawType\":\"object\",\"type\":\"string\"}],\"ref\":\"b4275603-c5c4-420b-862e-f8d9652c776c\",\"rows\":[],\"shape\":{\"columns\":21,\"rows\":0}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>customerID</th>\n      <th>gender</th>\n      <th>SeniorCitizen</th>\n      <th>Partner</th>\n      <th>Dependents</th>\n      <th>tenure</th>\n      <th>PhoneService</th>\n      <th>MultipleLines</th>\n      <th>InternetService</th>\n      <th>OnlineSecurity</th>\n      <th>OnlineBackup</th>\n      <th>DeviceProtection</th>\n      <th>TechSupport</th>\n      <th>StreamingTV</th>\n      <th>StreamingMovies</th>\n      <th>Contract</th>\n      <th>PaperlessBilling</th>\n      <th>PaymentMethod</th>\n      <th>MonthlyCharges</th>\n      <th>TotalCharges</th>\n      <th>Churn</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"Empty DataFrame\nColumns: [customerID, gender, SeniorCitizen, Partner, Dependents, tenure, PhoneService, MultipleLines, InternetService, OnlineSecurity, OnlineBackup, DeviceProtection, TechSupport, StreamingTV, StreamingMovies, Contract, PaperlessBilling, PaymentMethod, MonthlyCharges, TotalCharges, Churn]\nIndex: []","content_type":"text/plain"}}}],"key":"wGgQ05OHg8"}],"key":"v1HEdtj3ma"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Al parecer, tampoco hay registros duplicados en este dataset. Finalmente, veamos los datos atípicos que tenemos para nuestras variables numéricas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fmh7Riekwu"}],"key":"JavPQiufwb"}],"key":"R40ZtGB9nK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"num_cols = df.select_dtypes(include=[np.number]).columns\n\nprint(num_cols)","key":"fpE61QHx13"},{"type":"output","id":"4Xs8vM5KUq8mJ6nIeWy9q","data":[{"name":"stdout","output_type":"stream","text":"Index(['tenure', 'MonthlyCharges', 'TotalCharges'], dtype='object')\n"}],"key":"ZYOTFdbuND"}],"key":"uANdrXWJJW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"outlier_summary = {}\n\nfor col in num_cols:\n    Q1 = df[col].quantile(0.25)\n    Q3 = df[col].quantile(0.75)\n    IQR = Q3 - Q1\n    lower = Q1 - 1.5 * IQR\n    upper = Q3 + 1.5 * IQR\n    outliers = df[(df[col] < lower) | (df[col] > upper)][col]\n    outlier_summary[col] = len(outliers)\n\noutlier_df = pd.DataFrame.from_dict(outlier_summary, orient='index', columns=['n_outliers'])\noutlier_df['porcentaje'] = 100 * outlier_df['n_outliers'] / len(df)\noutlier_df.sort_values('porcentaje', ascending=False)","key":"BJTriRiDiJ"},{"type":"output","id":"XKUau8_Xysn80nOERdRv6","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"n_outliers\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"porcentaje\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"b1485493-7124-41cc-9620-1becd1a69a0f\",\"rows\":[[\"tenure\",\"0\",\"0.0\"],[\"MonthlyCharges\",\"0\",\"0.0\"],[\"TotalCharges\",\"0\",\"0.0\"]],\"shape\":{\"columns\":2,\"rows\":3}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>n_outliers</th>\n      <th>porcentaje</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>tenure</th>\n      <td>0</td>\n      <td>0.0</td>\n    </tr>\n    <tr>\n      <th>MonthlyCharges</th>\n      <td>0</td>\n      <td>0.0</td>\n    </tr>\n    <tr>\n      <th>TotalCharges</th>\n      <td>0</td>\n      <td>0.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                n_outliers  porcentaje\ntenure                   0         0.0\nMonthlyCharges           0         0.0\nTotalCharges             0         0.0","content_type":"text/plain"}}}],"key":"tNkDkXD09m"}],"key":"Rzws0Ik5HI"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Como se puede observar, no existen prevalencias de datos faltantes, duplicados o atípicos. Esto lo hará más eficaz a la hora de observar el análisis debido a su estado.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CemkBLrG0I"}],"key":"zh3k4Y0hpM"}],"key":"vg1pSGlt4L"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.3 Verificación de correlación y multicolinealidad.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rwbaw97yji"}],"key":"VpLLyaDNhj"}],"identifier":"id-1-3-verificaci-n-de-correlaci-n-y-multicolinealidad","label":"1.3 Verificación de correlación y multicolinealidad.","html_id":"id-1-3-verificaci-n-de-correlaci-n-y-multicolinealidad","implicit":true,"key":"ewVJx6pGC1"}],"key":"FNjo8y1Ajb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A continuación, observemos si en los datos hay índices de multicolinealidad. Para esto, haremos un mapa de calor, y posteriormente se hará el cálculo del VIF para tener constancia de estos resultados.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T3QBuBn8Ge"}],"key":"lPMuw4sMdT"}],"key":"tqp0SG63vF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"num_vars = df.select_dtypes(include=[\"int64\", \"float64\"])\ncorr_matrix = num_vars.corr()\n\nplt.figure(figsize=(12,8))\nsns.heatmap(\n    corr_matrix,\n    cmap=\"Blues\",\n    center=0,\n    annot=True,        \n    fmt=\".2f\",         \n    linewidths=0.5,    \n    square=True\n)\nplt.title(\"Matriz de Correlación\", fontsize=14)\nplt.show()","key":"vsxJpewyQI"},{"type":"output","id":"P30BHeYc7JRi_oayiihlN","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"67af4298380cb1331b5f53bcfcd599b3","path":"/67af4298380cb1331b5f53bcfcd599b3.png"},"text/plain":{"content":"<Figure size 1200x800 with 2 Axes>","content_type":"text/plain"}}}],"key":"cwiMEIj00U"}],"key":"JjSf8YTJyp"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Aquí, la variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lv8ReyNuAc"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"TotalCharges","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wYQARKp4Rd"}],"key":"xsFf9TIVdV"},{"type":"text","value":" o costo total tiene un índice de correlación de 0.83, lo que indica que hay una correlación entre esta variable y otras. Observemos su comportamiento calculando el VIF.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cRVDE9VXin"}],"key":"Kpp2qk5n7H"}],"key":"Z3oC0qOdjf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df_num = num_vars.dropna()\n\nX = add_constant(df_num)\n\nvif_data = pd.DataFrame()\nvif_data[\"Variable\"] = X.columns\nvif_data[\"VIF\"] = [variance_inflation_factor(X.values, i)\n                   for i in range(X.shape[1])]\n\n\npd.set_option(\"display.max_rows\", None)  \nprint(vif_data) ","key":"IkV5dbbrIJ"},{"type":"output","id":"oUQ2NP3ERe8Kf20ejvf9N","data":[{"name":"stdout","output_type":"stream","text":"         Variable        VIF\n0           const  14.899868\n1          tenure   5.836728\n2  MonthlyCharges   3.216730\n3    TotalCharges   9.510931\n"}],"key":"Tjxotvtlrb"}],"key":"f0iEOGQ1pl"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Nos damos cuenta de que el VIF para ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rtOEgQmPOW"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"TotalCharges","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZQSAycN1Hj"}],"key":"gF5QGxBi0w"},{"type":"text","value":" es de casi 10, por lo que sospechamos un alto índice de multicolinealidad en esta variable. Esto tendría sentido, ya que podríamos establecer que el costo total (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K99RJjlF0B"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"TotalCharges","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SV6x4Cb7Sq"}],"key":"iOqyQagth9"},{"type":"text","value":") es el producto entre el total de meses y el costo mensual. Para esto, hagamos una nueva columna que tenga este producto en cuenta.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mCTQiIRnAK"}],"key":"Hj8dbPPLpl"}],"key":"UnIwWljGJU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df[\"es_multiplo\"] = np.isclose(df[\"TotalCharges\"], df[\"tenure\"] * df[\"MonthlyCharges\"], atol=1)\nprint(df[\"es_multiplo\"].value_counts(dropna=False))\n","key":"Fw3HAmKSh3"},{"type":"output","id":"rGVN0h5w5bJ2FkYAr7hkQ","data":[{"name":"stdout","output_type":"stream","text":"es_multiplo\nFalse    6289\nTrue      754\nName: count, dtype: int64\n"}],"key":"AW30koeMgI"}],"key":"JA8ycnQTR9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Gracias a lo anterior, vemos que casi el ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YbyN7v2WBP"},{"type":"inlineMath","value":"10%","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">10%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">10</span></span></span></span>","key":"ecViR9BBlr"},{"type":"text","value":" de los datos se pueden expresar como combinación lineal, claro, este valor puede variar, pero se observa una dependencia lineal entre las columnas ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Adqazblm60"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"MonthlyCharges","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SZAmPqC0Wc"}],"key":"sG4amcTrEG"},{"type":"text","value":" y ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vfinatzf6I"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"tenure","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mwfbFwSx8r"}],"key":"D00zFs3tpt"},{"type":"text","value":", con esto en mente, vamos a descartarla de nuestro dataset y recalculamos el VIF para observar los cambios que hemos tenido.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wZroXkhf2j"}],"key":"OXaDAmv7nW"}],"key":"dZOSZV4TAn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.drop([\"TotalCharges\",\"es_multiplo\"], axis=1, inplace=True, errors=\"ignore\")","key":"muLpAl8Wz0"},{"type":"output","id":"IPHGwguXKBq5t2O15EmUM","data":[],"key":"LFXOrvvGkW"}],"key":"ccpmMl21BR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"num_vars = df.select_dtypes(include=[\"int64\", \"float64\"])\ndf_num = num_vars.dropna()\n\nX = add_constant(df_num)\n\nvif_data = pd.DataFrame()\nvif_data[\"Variable\"] = X.columns\nvif_data[\"VIF\"] = [variance_inflation_factor(X.values, i)\n                   for i in range(X.shape[1])]\n\n\npd.set_option(\"display.max_rows\", None)  \nprint(vif_data) ","key":"wVWCGBszGN"},{"type":"output","id":"NW7Mg56qONHkchbdZB9Lj","data":[{"name":"stdout","output_type":"stream","text":"         Variable       VIF\n0           const  6.288768\n1          tenure  1.065478\n2  MonthlyCharges  1.065478\n"}],"key":"f7TTJJtQxN"}],"key":"aZottimQT8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Con este cálculo hecho, vemos cómo el VIF ha disminuido drásticamente (casi por debajo de 1), con valores muy bajos en comparación de antes. Ahora, usemos la V de Cramer para ver si hay multicolinealidad entre variables categorías.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A5czI3FbaH"}],"key":"MORIEvaRw6"}],"key":"rQJSmOduCQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def cramers_v(x, y):\n    confusion_matrix = pd.crosstab(x, y)\n    chi2 = chi2_contingency(confusion_matrix)[0]\n    n = confusion_matrix.sum().sum()\n    phi2 = chi2 / n\n    r, k = confusion_matrix.shape\n    phi2corr = max(0, phi2 - ((k-1)*(r-1))/(n-1))    \n    rcorr = r - ((r-1)**2)/(n-1)\n    kcorr = k - ((k-1)**2)/(n-1)\n    return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\n\ncat_vars = df.select_dtypes(include=[\"object\"]).columns\n\nassoc_matrix = pd.DataFrame(\n    np.zeros((len(cat_vars), len(cat_vars))),\n    index=cat_vars,\n    columns=cat_vars\n)\n\nfor col1 in cat_vars:\n    for col2 in cat_vars:\n        if col1 != col2:\n            assoc_matrix.loc[col1, col2] = cramers_v(df[col1], df[col2])\n\nprint(assoc_matrix.round(3))","key":"RwY92RBq4O"},{"type":"output","id":"_OjlPPZo5pYJ2HyFHX9GM","data":[{"name":"stderr","output_type":"stream","text":"C:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: divide by zero encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\nC:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\n"},{"name":"stdout","output_type":"stream","text":"                  customerID  gender  SeniorCitizen  Partner  Dependents  \\\ncustomerID               0.0     inf            inf      NaN         inf   \ngender                   NaN   0.000          0.000    0.000       0.000   \nSeniorCitizen            inf   0.000          0.000    0.011       0.210   \nPartner                  inf   0.000          0.011    0.000       0.452   \nDependents               inf   0.000          0.210    0.452       0.000   \nPhoneService             NaN   0.000          0.000    0.012       0.000   \nMultipleLines            NaN   0.000          0.146    0.143       0.019   \nInternetService          NaN   0.000          0.265    0.000       0.179   \nOnlineSecurity           inf   0.002          0.210    0.151       0.194   \nOnlineBackup             inf   0.000          0.182    0.152       0.162   \nDeviceProtection         inf   0.000          0.182    0.166       0.157   \nTechSupport              NaN   0.000          0.223    0.127       0.182   \nStreamingTV              inf   0.000          0.185    0.136       0.146   \nStreamingMovies          inf   0.000          0.188    0.128       0.140   \nContract                 NaN   0.000          0.143    0.296       0.244   \nPaperlessBilling         NaN   0.000          0.156    0.008       0.110   \nPaymentMethod            NaN   0.000          0.195    0.161       0.149   \nChurn                    NaN   0.000          0.150    0.150       0.163   \n\n                  PhoneService  MultipleLines  InternetService  \\\ncustomerID                 NaN            NaN              NaN   \ngender                   0.000          0.000            0.000   \nSeniorCitizen            0.000          0.146            0.265   \nPartner                  0.012          0.143            0.000   \nDependents               0.000          0.019            0.179   \nPhoneService             0.000          1.000            0.452   \nMultipleLines            1.000          0.000            0.396   \nInternetService          0.452          0.396            0.000   \nOnlineSecurity           0.175          0.229            0.724   \nOnlineBackup             0.172          0.245            0.707   \nDeviceProtection         0.172          0.246            0.707   \nTechSupport              0.176          0.230            0.723   \nStreamingTV              0.180          0.261            0.717   \nStreamingMovies          0.177          0.262            0.716   \nContract                 0.000          0.079            0.206   \nPaperlessBilling         0.011          0.165            0.378   \nPaymentMethod            0.000          0.166            0.312   \nChurn                    0.000          0.036            0.322   \n\n                  OnlineSecurity  OnlineBackup  DeviceProtection  TechSupport  \\\ncustomerID                   inf           inf               inf          NaN   \ngender                     0.002         0.000             0.000        0.000   \nSeniorCitizen              0.210         0.182             0.182        0.223   \nPartner                    0.151         0.152             0.166        0.127   \nDependents                 0.194         0.162             0.157        0.182   \nPhoneService               0.175         0.172             0.172        0.176   \nMultipleLines              0.229         0.245             0.246        0.230   \nInternetService            0.724         0.707             0.707        0.723   \nOnlineSecurity             0.000         0.718             0.717        0.733   \nOnlineBackup               0.718         0.000             0.719        0.720   \nDeviceProtection           0.717         0.719             0.000        0.726   \nTechSupport                0.733         0.720             0.726        0.000   \nStreamingTV                0.708         0.715             0.734        0.716   \nStreamingMovies            0.708         0.714             0.736        0.716   \nContract                   0.301         0.258             0.297        0.331   \nPaperlessBilling           0.341         0.321             0.321        0.329   \nPaymentMethod              0.304         0.282             0.286        0.306   \nChurn                      0.347         0.292             0.281        0.343   \n\n                  StreamingTV  StreamingMovies  Contract  PaperlessBilling  \\\ncustomerID                NaN              NaN       NaN               NaN   \ngender                  0.000            0.000     0.000             0.000   \nSeniorCitizen           0.185            0.188     0.143             0.156   \nPartner                 0.136            0.128     0.296             0.008   \nDependents              0.146            0.140     0.244             0.110   \nPhoneService            0.180            0.177     0.000             0.011   \nMultipleLines           0.261            0.262     0.079             0.165   \nInternetService         0.717            0.716     0.206             0.378   \nOnlineSecurity          0.708            0.708     0.301             0.341   \nOnlineBackup            0.715            0.714     0.258             0.321   \nDeviceProtection        0.734            0.736     0.297             0.321   \nTechSupport             0.716            0.716     0.331             0.329   \nStreamingTV             0.000            0.771     0.235             0.336   \nStreamingMovies         0.771            0.000     0.238             0.332   \nContract                0.235            0.238     0.000             0.177   \nPaperlessBilling        0.336            0.332     0.177             0.000   \nPaymentMethod           0.273            0.274     0.266             0.248   \nChurn                   0.230            0.230     0.410             0.191   \n\n                  PaymentMethod  Churn  \ncustomerID                  NaN    NaN  \ngender                    0.000  0.000  \nSeniorCitizen             0.195  0.150  \nPartner                   0.161  0.150  \nDependents                0.149  0.163  \nPhoneService              0.000  0.000  \nMultipleLines             0.166  0.036  \nInternetService           0.312  0.322  \nOnlineSecurity            0.304  0.347  \nOnlineBackup              0.282  0.292  \nDeviceProtection          0.286  0.281  \nTechSupport               0.306  0.343  \nStreamingTV               0.273  0.230  \nStreamingMovies           0.274  0.230  \nContract                  0.266  0.410  \nPaperlessBilling          0.248  0.191  \nPaymentMethod             0.000  0.303  \nChurn                     0.303  0.000  \n"},{"name":"stderr","output_type":"stream","text":"C:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2173232291.py:10: RuntimeWarning: invalid value encountered in scalar divide\n  return np.sqrt(phi2corr / min((kcorr-1), (rcorr-1)))\n"}],"key":"bGEdEEkjaF"}],"key":"Jtk40TMBFy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12,8))\nsns.heatmap(assoc_matrix, cmap=\"viridis\", annot=False)\nplt.title(\"Matriz de Asociación Categórica (Cramér's V)\")\nplt.show()","key":"CRkUZHuWPo"},{"type":"output","id":"63qW4egiyqybCLdY89us_","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"6708b493bd25cf49d5dabb9db67f343c","path":"/6708b493bd25cf49d5dabb9db67f343c.png"},"text/plain":{"content":"<Figure size 1200x800 with 2 Axes>","content_type":"text/plain"}}}],"key":"XEaZmYOCLl"}],"key":"SztKO94izu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"De esta matriz de asociación de variables categoricas, vemos que, en su gran mayoría, su relación no presenta problemas de multicolinealidad, con valores oscilando entre el 0.1 y el -0.025. Con esto en mente, también podremos eliminar la variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d8GwIsOf8y"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"customerID","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Akvpn1SuOI"}],"key":"psviSaKcwA"},{"type":"text","value":" al ser este un indicador único, que no aporta información tanto al análisis o al modelo posterior.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JPjbBW8OLD"}],"key":"NeyX6YjEG1"}],"key":"ZIt3ZfHnJ4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.drop([\"customerID\"], axis=1, inplace=True, errors=\"ignore\")\ndf.head()","key":"LqP89arzam"},{"type":"output","id":"1FSY9WJaASW7BZXDD_p8X","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"gender\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"SeniorCitizen\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Partner\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Dependents\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"tenure\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"PhoneService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MultipleLines\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"InternetService\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineSecurity\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"OnlineBackup\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"DeviceProtection\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"TechSupport\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingTV\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"StreamingMovies\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"Contract\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaperlessBilling\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"PaymentMethod\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"MonthlyCharges\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"Churn\",\"rawType\":\"object\",\"type\":\"string\"}],\"ref\":\"2beb273b-b203-44dd-9a3c-03df6d0aae95\",\"rows\":[[\"0\",\"Female\",\"No\",\"Yes\",\"No\",\"1\",\"No\",\"No phone service\",\"DSL\",\"No\",\"Yes\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Electronic check\",\"29.85\",\"No\"],[\"1\",\"Male\",\"No\",\"No\",\"No\",\"34\",\"Yes\",\"No\",\"DSL\",\"Yes\",\"No\",\"Yes\",\"No\",\"No\",\"No\",\"One year\",\"No\",\"Mailed check\",\"56.95\",\"No\"],[\"2\",\"Male\",\"No\",\"No\",\"No\",\"2\",\"Yes\",\"No\",\"DSL\",\"Yes\",\"Yes\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Mailed check\",\"53.85\",\"Yes\"],[\"3\",\"Male\",\"No\",\"No\",\"No\",\"45\",\"No\",\"No phone service\",\"DSL\",\"Yes\",\"No\",\"Yes\",\"Yes\",\"No\",\"No\",\"One year\",\"No\",\"Bank transfer (automatic)\",\"42.3\",\"No\"],[\"4\",\"Female\",\"No\",\"No\",\"No\",\"2\",\"Yes\",\"No\",\"Fiber optic\",\"No\",\"No\",\"No\",\"No\",\"No\",\"No\",\"Month-to-month\",\"Yes\",\"Electronic check\",\"70.7\",\"Yes\"]],\"shape\":{\"columns\":19,\"rows\":5}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>gender</th>\n      <th>SeniorCitizen</th>\n      <th>Partner</th>\n      <th>Dependents</th>\n      <th>tenure</th>\n      <th>PhoneService</th>\n      <th>MultipleLines</th>\n      <th>InternetService</th>\n      <th>OnlineSecurity</th>\n      <th>OnlineBackup</th>\n      <th>DeviceProtection</th>\n      <th>TechSupport</th>\n      <th>StreamingTV</th>\n      <th>StreamingMovies</th>\n      <th>Contract</th>\n      <th>PaperlessBilling</th>\n      <th>PaymentMethod</th>\n      <th>MonthlyCharges</th>\n      <th>Churn</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Female</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>1</td>\n      <td>No</td>\n      <td>No phone service</td>\n      <td>DSL</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Electronic check</td>\n      <td>29.85</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Male</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>34</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>One year</td>\n      <td>No</td>\n      <td>Mailed check</td>\n      <td>56.95</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Male</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>2</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Mailed check</td>\n      <td>53.85</td>\n      <td>Yes</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Male</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>45</td>\n      <td>No</td>\n      <td>No phone service</td>\n      <td>DSL</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Yes</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>No</td>\n      <td>One year</td>\n      <td>No</td>\n      <td>Bank transfer (automatic)</td>\n      <td>42.30</td>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Female</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>2</td>\n      <td>Yes</td>\n      <td>No</td>\n      <td>Fiber optic</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>No</td>\n      <td>Month-to-month</td>\n      <td>Yes</td>\n      <td>Electronic check</td>\n      <td>70.70</td>\n      <td>Yes</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"   gender SeniorCitizen Partner Dependents  tenure PhoneService  \\\n0  Female            No     Yes         No       1           No   \n1    Male            No      No         No      34          Yes   \n2    Male            No      No         No       2          Yes   \n3    Male            No      No         No      45           No   \n4  Female            No      No         No       2          Yes   \n\n      MultipleLines InternetService OnlineSecurity OnlineBackup  \\\n0  No phone service             DSL             No          Yes   \n1                No             DSL            Yes           No   \n2                No             DSL            Yes          Yes   \n3  No phone service             DSL            Yes           No   \n4                No     Fiber optic             No           No   \n\n  DeviceProtection TechSupport StreamingTV StreamingMovies        Contract  \\\n0               No          No          No              No  Month-to-month   \n1              Yes          No          No              No        One year   \n2               No          No          No              No  Month-to-month   \n3              Yes         Yes          No              No        One year   \n4               No          No          No              No  Month-to-month   \n\n  PaperlessBilling              PaymentMethod  MonthlyCharges Churn  \n0              Yes           Electronic check           29.85    No  \n1               No               Mailed check           56.95    No  \n2              Yes               Mailed check           53.85   Yes  \n3               No  Bank transfer (automatic)           42.30    No  \n4              Yes           Electronic check           70.70   Yes  ","content_type":"text/plain"}}}],"key":"Twh45dnNxA"}],"key":"OB2yv0y9a1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.4 Análisis Exploratorio.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Liy5yyXKJE"}],"key":"BKbYRDXMK7"}],"identifier":"id-1-4-an-lisis-exploratorio","label":"1.4 Análisis Exploratorio.","html_id":"id-1-4-an-lisis-exploratorio","implicit":true,"key":"VE1XVQPSvL"}],"key":"hRsqOFSoWM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.4.0 Previo al análisis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v3n1pKnKYK"}],"key":"XhBLUkGDBy"}],"identifier":"id-1-4-0-previo-al-an-lisis","label":"1.4.0 Previo al análisis","html_id":"id-1-4-0-previo-al-an-lisis","implicit":true,"key":"Yz6OlxAHeN"}],"key":"sS47kKjHYP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ahora, por temas de sencillez a la hora de analizar, renombraremos las variables a formas más sencillas:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"di11j1uA3f"}],"key":"y4i7W3mEM9"}],"key":"Wr2SYXxuzQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.rename(columns={\n    \"SeniorCitizen\": \"senior\",\n    \"Partner\": \"partner\",\n    \"Dependents\": \"dependents\",        \n    \"PhoneService\": \"phone\",\n    \"MultipleLines\": \"phone_multiple\",\n    \"InternetService\": \"internet\",\n    \"OnlineSecurity\": \"internet_security\",\n    \"OnlineBackup\": \"internet_backup\",\n    \"DeviceProtection\": \"internet_protection\",\n    \"TechSupport\": \"internet_support\",\n    \"StreamingTV\": \"streaming_tv\",\n    \"StreamingMovies\": \"streaming_movies\",\n    \"Contract\": \"contract\",\n    \"PaperlessBilling\": \"paperless\",\n    \"PaymentMethod\": \"payment\",\n    \"MonthlyCharges\": \"charges_monthly\",\n    \"Churn\": \"churn\",\n}, inplace=True)\n","key":"EtSIkHUQQ4"},{"type":"output","id":"77nEIaZ7GG5i7D30EFitL","data":[],"key":"WL158Tu9k4"}],"key":"zu4sgXnQdx"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"En este caso, nuestra variable de interés es ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZW2Ee73jyC"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"churn","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tS0BaW49lj"}],"key":"UEg81BDNAv"},{"type":"text","value":", la cual indica si un usuario abandonó o no. Veamos la proporción antes de ver el análisis.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KnZAqfow4d"}],"key":"zhpZGS4aIL"}],"key":"LoCS5JWV2l"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df[\"churn\"] = df[\"churn\"].map({\"Yes\": 1, \"No\": 0})\nprint(df[\"churn\"].value_counts(dropna=False))\n","key":"N0kYBJSp8a"},{"type":"output","id":"_DQh9MFrgCcaKnuYY4TCM","data":[{"name":"stdout","output_type":"stream","text":"churn\n0    5174\n1    1869\nName: count, dtype: int64\n"}],"key":"XRxxmK1H2P"}],"key":"CSpdVBRTNr"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"La variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ACTPhL6SS8"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"churn","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PNRhzySEVT"}],"key":"H59SenBqi1"},{"type":"text","value":" presenta un desbalance, con 5174 registros de 0 y 1869 registros de 1. En este contexto, el 0 significa que el usuario no abandonó, mientras que 1 implica que el usuario abandonó.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OmhVew7UWf"}],"key":"pZ6C8KTD1K"}],"key":"LuLOojYuJc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.to_csv(\"data_churn_EDA.csv\", index=False)","key":"RUmxec4EXc"},{"type":"output","id":"lE8d03JNge37fiH2_2p3f","data":[],"key":"JztGhkJoVP"}],"key":"ucFHwojfYe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.4.1 Análisis para variables categoricas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZJ4ACZ5s3X"}],"key":"M86Uscr7CV"}],"identifier":"id-1-4-1-an-lisis-para-variables-categoricas","label":"1.4.1 Análisis para variables categoricas.","html_id":"id-1-4-1-an-lisis-para-variables-categoricas","implicit":true,"key":"jn5cWcQDoC"}],"key":"fHZsksn8ZM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"En primera vista, veamos cómo la variable objetivo se comporta junto a otras variables categoricas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c08RZFEupY"}],"key":"aGi6q8XFlz"}],"key":"NUjH0h7TkI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(6,4))\nsns.countplot(data=df, x='churn', palette='Blues_r')\nplt.title(\"No Abandono (no Churn) vs Abandono (Churn)\")\nplt.ylabel(\"Conteo\") \nplt.xlabel(\"Estado del usuario (0 = No churn, 1 = Churn)\")\nplt.show()","key":"BcjfKKxa4X"},{"type":"output","id":"031oNUYMxgy5cveAcrpLM","data":[{"name":"stderr","output_type":"stream","text":"C:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\2665910966.py:2: FutureWarning: \n\nPassing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.\n\n  sns.countplot(data=df, x='churn', palette='Blues_r')\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"405f6503b8a668aecc8ca986c184b8bf","path":"/405f6503b8a668aecc8ca986c184b8bf.png"},"text/plain":{"content":"<Figure size 600x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"s6xitH4qnA"}],"key":"bE3XsHwQpb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Este gráfico de barras representa la misma proporción vista en la sección anterior, donde existe un desbalance entre ambos usuarios.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OVAhNoHlnK"}],"key":"OvBzguu2ZW"}],"key":"XnfHsfhZtf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12,4))\nsns.countplot(data=df, x=\"gender\", hue=\"churn\", palette=\"Blues_r\")\nplt.title(\"Distribución de gender según churn\")\nplt.xlabel(\"gender\")\nplt.ylabel(\"Cantidad\")\nplt.show()","key":"L9Kn4KAoJs"},{"type":"output","id":"TpMJ4ss0Ljx_Wpc4SqGU2","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a8e878a6243176e640c1133c561796b8","path":"/a8e878a6243176e640c1133c561796b8.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"qlvLZEITAt"}],"key":"Sdd95gwH8E"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Si observamos la distribución de género y los usuarios que hicieron churn y no churn, vemos que la distribución es muy similar de ambos lados, es decir, de los usuarios que abandonaron y no abandonaron. Podemos destacar que ligeramente hay más usuarios hombres que mujeres dentro del dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Au1aaNo1eJ"}],"key":"ymuTO0O0fL"}],"key":"eOkEd3iDuK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12,4))\nsns.countplot(data=df, x=\"phone_multiple\", hue=\"churn\", palette=\"Blues_r\")\nplt.title(\"Distribución de phone_multiple según churn\")\nplt.xlabel(\"phone\")\nplt.ylabel(\"Cantidad\")\nplt.show()","key":"MxhBk8Wh7f"},{"type":"output","id":"JTlnos8d-0Ui3DdyXGAjK","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f28aa471df931650cb04aab944a2d2c5","path":"/f28aa471df931650cb04aab944a2d2c5.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"griGDu0XHa"}],"key":"jHT3j6QQkP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Aquí tenemos la variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PYe8ISRnRX"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"phone_multiple","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mqcXAz9rxr"}],"key":"jZqH9qc7Rl"},{"type":"text","value":", lo que indica si un usuario tiene más de una línea telefónica activa. Dentro de estos resultados, vemos que la mayoría de los usuarios en las diferentes categorías no han abandonado, con la gran proporción de estos en la sección de “No”, es decir, que solo tienen una línea telefónica. Curiosamente, parece que es más común tener más de una línea activa a no tener líneas de teléfono activas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pKslxnaKPB"}],"key":"Po7375UCYC"}],"key":"xVJ9ae9iJi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12,4))\nsns.countplot(data=df, x=\"internet\", hue=\"churn\", palette=\"Blues_r\")\nplt.title(\"Distribución de internet según churn\")\nplt.xlabel(\"internet\")\nplt.ylabel(\"Cantidad\")\nplt.show()","key":"VfHAOfIBDc"},{"type":"output","id":"s0N5cdxC4l0QuS_lPsqq2","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"77be1a7fcc29a4dc01f48f02771cb9d2","path":"/77be1a7fcc29a4dc01f48f02771cb9d2.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"j3qmFGNBff"}],"key":"lGFF8mRhDf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Para la variable *","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JBxVAF6hwR"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Internet","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HSOuM9VUdB"}],"key":"TYXRjbs1mC"},{"type":"text","value":", observamos un comportamiento diferente a lo anterior visto. Empecemos con que existe una gran proporción de usuarios que no tienen redes de internet, pero aquellos que sí se dividen en dos grandes categorías: DSL y “Fiber optic”. De estos, los usuarios que tienen “Fiber optic” tienen mayor prevalencia a abandonar que aquellos de DSL. Este resultado podría darnos indicios sobre aquellas variables que más afecten a la hora de modelar.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mbET2q829Z"}],"key":"nkANHgttTF"}],"key":"LDyZrlRIv5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12,4))\nsns.countplot(data=df, x=\"contract\", hue=\"churn\", palette=\"Blues_r\")\nplt.title(\"Distribución de contract según churn\")\nplt.xlabel(\"contract\")\nplt.ylabel(\"Cantidad\")\nplt.show()","key":"WeMyqrbZYv"},{"type":"output","id":"GTc3LQNTUMRThcagOcv3w","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"30aa3e6321fec51f8aae7fed0823f7cc","path":"/30aa3e6321fec51f8aae7fed0823f7cc.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"JURno11A3E"}],"key":"y2fWLSUBpA"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Si observamos ahora la variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jFz944VY4F"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"contract","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GQrDZQX7iQ"}],"key":"FrT1gaJ3wG"},{"type":"text","value":", que indica el tipo de contrato que tienen los usuarios, vemos tres categorías: Month-to-month, One year y Two Year. Los usuarios que tengan contratos de un año o más tienen muy baja tendencia a hacer churn, mientras que aquellos usuarios que tengan de mes a mes si son más propensos a abandonar.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hw3dW1LhUh"}],"key":"sarrJCg0rS"}],"key":"yarYmtWOgu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(12,4))\nsns.countplot(data=df, x=\"payment\", hue=\"churn\", palette=\"Blues_r\")\nplt.title(\"Distribución de payment según churn\")\nplt.xlabel(\"payment\")\nplt.ylabel(\"Cantidad\")\nplt.show()","key":"iI0boG8lHG"},{"type":"output","id":"pGtIRQ9pfBT_YDTw_yfKF","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a87a2bfce6632d722d377cbbbbfed4a0","path":"/a87a2bfce6632d722d377cbbbbfed4a0.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"Wlgpjcgd7X"}],"key":"pLemmN3lGc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finalmente, para los métodos de pago observamos una tendencia en relación con aquellos usuarios que son más propensos a abandonar: aquellos usuarios que reciban un cheque electrónico, a casi la misma proporción de aquellos que no abandonan, también suelen abandonar. Sin embargo, para el resto de métodos de pago, los usuarios mantienen una tasa baja de abandono.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zdJ19DkiqQ"}],"key":"faiRskcfFA"}],"key":"oeNxKKwdkE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.4.2 Análisis para variables numericas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GDXk3bQhHi"}],"key":"s8yZfiCBRE"}],"identifier":"id-1-4-2-an-lisis-para-variables-numericas","label":"1.4.2 Análisis para variables numericas.","html_id":"id-1-4-2-an-lisis-para-variables-numericas","implicit":true,"key":"Tkkag1JVK3"}],"key":"vqYxC0EAim"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ahora, haremos de forma análoga, pero con las variables numéricas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tQLRKVt72a"}],"key":"BWjkTOSC1b"}],"key":"qfZFT5IymL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(16,5))\n\nsns.boxplot(data=df, x=\"churn\", y=\"tenure\", palette=\"Blues_r\", ax=axes[0])\naxes[0].set_title(\"tenure vs churn\")\naxes[0].set_ylabel(\"tenure (Meses)\")\n\nsns.histplot(data=df, x=\"tenure\", hue=\"churn\", palette=\"Blues_d\", bins=13, kde=True, alpha=0.6, ax=axes[1])\naxes[1].set_title(\"tenure (Tiempo de contrato en meses) segun churn\")\naxes[1].set_xlabel(\"tenure (Meses)\")\naxes[1].set_ylabel(\"Frecuencia\")\n\nplt.tight_layout()\nplt.show()","key":"AEtuL8Db0G"},{"type":"output","id":"xWb9CDS1jmOVg68K6UPUU","data":[{"name":"stderr","output_type":"stream","text":"C:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\3033057271.py:3: FutureWarning: \n\nPassing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.\n\n  sns.boxplot(data=df, x=\"churn\", y=\"tenure\", palette=\"Blues_r\", ax=axes[0])\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9939f160ecfd66c4bd27b15c2ac92bc1","path":"/9939f160ecfd66c4bd27b15c2ac92bc1.png"},"text/plain":{"content":"<Figure size 1600x500 with 2 Axes>","content_type":"text/plain"}}}],"key":"QS6rMKJ2Vq"}],"key":"D7fAnwXkpo"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Para la variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cOL2pf8iAi"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"tenure","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A04OLRSwco"}],"key":"GDGKfM0kxF"},{"type":"text","value":", se observa que el comportamiento de los usuarios que abandonan parece seguir una tendencia. Aquellos usuarios que abandonan suelen tener poco tiempo con la empresa, de 0 a 10 meses, mientras que aquellos que no abandonan tienen un rango bastante amplio, de 10 a un máximo de 70 meses, siendo este intervalo superior a la moda para estos usuarios.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oPV5cl7Xaa"}],"key":"hznDr3HZ5T"}],"key":"o96iJ4isE6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(16,5))\n\nsns.boxplot(data=df, x=\"churn\", y=\"charges_monthly\", palette=\"Blues_r\", ax=axes[0])\naxes[0].set_title(\"charges_monthly vs churn\")\naxes[0].set_ylabel(\"charges_monthly (en USD)\")\n\nsns.histplot(data=df, x=\"charges_monthly\", hue=\"churn\", palette=\"Blues_d\", bins=13, kde=True, alpha=0.6, ax=axes[1])\naxes[1].set_title(\"charges_monthly segun churn\")\naxes[1].set_xlabel(\"charges_monthly (en USD)\")\naxes[1].set_ylabel(\"Frecuencia\")\n\nplt.tight_layout()\nplt.show()","key":"YAJQUeZn4f"},{"type":"output","id":"WT17vzPtVn2m-_9236c82","data":[{"name":"stderr","output_type":"stream","text":"C:\\Users\\taran\\AppData\\Local\\Temp\\ipykernel_19592\\82208992.py:3: FutureWarning: \n\nPassing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.\n\n  sns.boxplot(data=df, x=\"churn\", y=\"charges_monthly\", palette=\"Blues_r\", ax=axes[0])\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2a18fd657ed3be8008c53236b5c1e8dd","path":"/2a18fd657ed3be8008c53236b5c1e8dd.png"},"text/plain":{"content":"<Figure size 1600x500 with 2 Axes>","content_type":"text/plain"}}}],"key":"YrwI48I96W"}],"key":"YyI148nz5w"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Para esta variable, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"egc5aSyKsV"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"charges_monthly","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qGz5kWlquZ"}],"key":"el4A7aiLwq"},{"type":"text","value":", el costo mensual para ambos usuarios es casi constante. No existe un patrón o tendencia a seguir, con ambos usuarios teniendo costos similares, siendo los usuarios que no abandonan que tienen mayor variabilidad en costos. Cabe resaltar que ambos grupos poseen el mismo rango mínimo y máximo para los costos.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eUFfSmZtDC"}],"key":"jlIDu8B33d"}],"key":"Ia4W7wkcSy"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Con esto en mente, podemos tener esto en cuenta y lo mismo que los resúmenes anteriores para usarlo como estrategias para el modelado, que se hará a continuación.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"of8t2osefE"}],"key":"L8GDtrfFqG"}],"key":"l4seliVcbF"}],"key":"fXhHguS1PZ"},"references":{"cite":{"order":[],"data":{}}}}